I"Ç>
<h2 id="ë²ˆë“¤ë§">ë²ˆë“¤ë§</h2>

<p>ëŒ€ë¶€ë¶„ React ì•±ë“¤ì€ Webpack, Rollup ë˜ëŠ” Browserify ê°™ì€ íˆ´ì„ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ íŒŒì¼ì„ í•˜ë‚˜ë¡œ ë³‘í•©í•œ â€œë²ˆë“¤ëœâ€ íŒŒì¼ì„ ì›¹ í˜ì´ì§€ì— í¬í•¨í•˜ì—¬ í•œ ë²ˆì— ì „ì²´ ì•±ì„ ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ë²ˆë“¤ì´ ê±°ëŒ€í•´ì§€ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ì¢‹ì€ í•´ê²°ë°©ë²•ì€ ë²ˆë“¤ì„ â€œë‚˜ëˆ„ëŠ”â€ ê²ƒì…ë‹ˆë‹¤.</p>

<p>ì•±ì— ì½”ë“œ ë¶„í• ì„ ë„ì…í•˜ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ë™ì  import() ë¬¸ë²•ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.</p>

<h4 id="before">before</h4>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// app.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">add</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./math</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">add</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">26</span><span class="p">));</span>

<span class="c1">// math.js</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="after">after</h4>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span><span class="p">(</span><span class="dl">"</span><span class="s2">./math</span><span class="dl">"</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">math</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">math</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">26</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="suspense">Suspense</h2>

<p>Suspenseë¥¼ ì‚¬ìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ê¸° ì „ê¹Œì§€ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì´ê²ƒì€ í”„ë¼ë¯¸ìŠ¤ê°€ ì•„ë‹™ë‹ˆë‹¤. Suspense í†µí•©ì—ì„œ ë§Œë“¤ì–´ë‚¸ íŠ¹ë³„í•œ ê°ì²´ì…ë‹ˆë‹¤.</span>
<span class="kd">const</span> <span class="nx">resource</span> <span class="o">=</span> <span class="nx">fetchProfileData</span><span class="p">();</span>

<span class="kd">function</span> <span class="nx">ProfilePage</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Suspense</span> <span class="nx">fallback</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Loading</span> <span class="nx">profile</span><span class="p">...</span><span class="o">&lt;</span><span class="sr">/h1&gt;}</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">ProfileDetails</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="nx">Suspense</span> <span class="nx">fallback</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Loading</span> <span class="nx">posts</span><span class="p">...</span><span class="o">&lt;</span><span class="sr">/h1&gt;}</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">ProfileTimeline</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/Suspense</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Suspense</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">ProfileDetails</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// ì•„ì§ ë¡œë”©ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ë”ë¼ë„, ì‚¬ìš©ì ì •ë³´ ì½ê¸°ë¥¼ ì‹œë„í•©ë‹ˆë‹¤</span>
  <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">resource</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">read</span><span class="p">();</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1&gt;</span><span class="err">;
</span><span class="p">}</span>

<span class="kd">function</span> <span class="nx">ProfileTimeline</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// ì•„ì§ ë¡œë”©ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ë”ë¼ë„, ê²Œì‹œê¸€ ì½ê¸°ë¥¼ ì‹œë„í•©ë‹ˆë‹¤</span>
  <span class="kd">const</span> <span class="nx">posts</span> <span class="o">=</span> <span class="nx">resource</span><span class="p">.</span><span class="nx">posts</span><span class="p">.</span><span class="nx">read</span><span class="p">();</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">posts</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">post</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">post</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">post</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span>      <span class="p">))}</span>
    <span class="o">&lt;</span><span class="sr">/ul</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br />
í™”ë©´ ìƒì— <code class="language-plaintext highlighter-rouge">&lt;ProfilePage&gt;</code>ë¥¼ ë Œë”ë§í•  ë•Œì— ì•„ë˜ì™€ ê°™ì€ ì¼ë“¤ì´ ë²Œì–´ì§‘ë‹ˆë‹¤.</p>

<ol>
  <li>fetchProfileData() ìš”ì²­ì„ ë°œë™ì‹œí‚µë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;ProfilePage&gt;</code>ì˜ ë Œë”ë§ì„ ì‹œë„í•©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;ProfileDetails&gt;</code>ì˜ ë Œë”ë§ì„ ì‹œë„í•©ë‹ˆë‹¤. resource.user.read()ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ì•„ì§ ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ê°€ ì•„ë¬´ ê²ƒë„ ì—†ìœ¼ë¯€ë¡œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ì„ ì‹œë„í•©ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">&lt;ProfileTimeline&gt;</code>ì˜ ë Œë”ë§ì„ ì‹œë„í•©ë‹ˆë‹¤. resource.posts.read()ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ë˜ í•œë²ˆ, ì•„ì§ ë°ì´í„°ê°€ ì—†ìœ¼ë¯€ë¡œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ì„ ì‹œë„í•©ë‹ˆë‹¤.</li>
  <li>ë Œë”ë§ì„ ì‹œë„í•  ì»´í¬ë„ŒíŠ¸ê°€ ë‚¨ì•„ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">&lt;ProfileDetails&gt;</code>ê°€ ì •ì§€ëœ ìƒíƒœì´ë¯€ë¡œ, ReactëŠ” íŠ¸ë¦¬ ìƒì—ì„œ <code class="language-plaintext highlighter-rouge">&lt;ProfielDetails&gt;</code> ìœ„ì— ì¡´ì¬í•˜ëŠ” ê²ƒ ì¤‘ ê°€ì¥ ê°€ê¹Œìš´ <code class="language-plaintext highlighter-rouge">&lt;Suspense&gt;</code> Fallbackì„ ì°¾ìŠµë‹ˆë‹¤. ê·¸ê²ƒì€ <code class="language-plaintext highlighter-rouge">&lt;h1&gt;</code>Loading profileâ€¦<code class="language-plaintext highlighter-rouge">&lt;/h1&gt;</code>ì…ë‹ˆë‹¤. ì¼ë‹¨, ì§€ê¸ˆìœ¼ë¡œì„œëŠ” í•  ì¼ì´ ë‹¤ ëë‚¬ìŠµë‹ˆë‹¤.</li>
</ol>

<h2 id="reactlazy">React.lazy</h2>

<p>React.lazy í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ë™ì  importë¥¼ ì‚¬ìš©í•´ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Suspense</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">OtherComponent</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">"</span><span class="s2">./OtherComponent</span><span class="dl">"</span><span class="p">));</span>
<span class="kd">const</span> <span class="nx">AnotherComponent</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">"</span><span class="s2">./AnotherComponent</span><span class="dl">"</span><span class="p">));</span>

<span class="kd">function</span> <span class="nx">MyComponent</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Suspense</span> <span class="nx">fallback</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Loading</span><span class="p">...</span><span class="o">&lt;</span><span class="sr">/div&gt;}</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">section</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">OtherComponent</span> <span class="o">/&gt;</span>
          <span class="o">&lt;</span><span class="nx">AnotherComponent</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/section</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/Suspense</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br />
lazy ì»´í¬ë„ŒíŠ¸ëŠ” Suspense ì»´í¬ë„ŒíŠ¸ í•˜ìœ„ì—ì„œ ë Œë”ë§ë˜ì–´ì•¼ í•˜ë©°, í•˜ë‚˜ì˜ Suspense ì»´í¬ë„ŒíŠ¸ë¡œ ì—¬ëŸ¬ lazy ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ìŒ€ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>

<h2 id="ë¹„ë™ê¸°ì‹-ë°˜ì‘-ë¼ìš°í„°">ë¹„ë™ê¸°ì‹ ë°˜ì‘ ë¼ìš°í„°</h2>

<p>íŠ¹ì • Routeì— ìˆì„ ë•Œë§Œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì™€ í•¨ê»˜ ì‚¬ìš©í•  ë•Œ íŠ¹ì • Routeì— ìˆì„ ë•Œë§Œ ë¡œë“œë˜ë„ë¡ ì»´í¬ë„ŒíŠ¸ë¥¼ í¬ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Suspense</span><span class="p">,</span> <span class="nx">lazy</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserRouter</span> <span class="k">as</span> <span class="nx">Router</span><span class="p">,</span> <span class="nx">Route</span><span class="p">,</span> <span class="nx">Switch</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-router-dom</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">FunComponent</span> <span class="o">=</span> <span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">"</span><span class="s2">./FunComponent</span><span class="dl">"</span><span class="p">));</span>
<span class="kd">const</span> <span class="nx">TerribleComponent</span> <span class="o">=</span> <span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">"</span><span class="s2">./TerribleComponent</span><span class="dl">"</span><span class="p">));</span>
<span class="kd">const</span> <span class="nx">TestComponent</span> <span class="o">=</span> <span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">"</span><span class="s2">./TestComponent</span><span class="dl">"</span><span class="p">));</span>
<span class="kd">const</span> <span class="nx">LoadingMessage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">I'm loading...</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">Suspense</span> <span class="nx">fallback</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">LoadingMessage</span> <span class="o">/&gt;</span><span class="p">}</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">Switch</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/fun</span><span class="dl">"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">FunComponent</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>
      <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/terrible</span><span class="dl">"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">TerribleComponent</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>
      <span class="o">&lt;</span><span class="nx">Route</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">TestComponent</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Switch</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/Suspense</span><span class="err">&gt;
</span><span class="p">);</span>
</code></pre></div></div>

<p><br />
<a href="https://velog.io/@bigbrothershin/Webpack-JS-ES6-%EB%AA%A8%EB%93%88%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%9D%B4%ED%95%B4">Webpack - ëª¨ë“ˆì‹œìŠ¤í…œê³¼ ë²ˆë“¤ë§ì˜ ì´í•´</a><br />
<a href="https://ko.reactjs.org/docs/code-splitting.html">React ê³µì‹ ë¬¸ì„œ - ì½”ë“œ ë¶„í• </a><br />
<a href="https://ko.reactjs.org/docs/concurrent-mode-suspense.html">React ê³µì‹ ë¬¸ì„œ - ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ Suspense (ì‹¤í—˜ ë‹¨ê³„)</a><br /></p>
:ET